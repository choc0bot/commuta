{% extends "base.html" %}
{% block content %}

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>

<!-- NAV -->

<div class="demo-drawer mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--blue-grey-50">
        <header class="demo-drawer-header">
          <img src="{{ image_url }}" class="demo-avatar">
          <div class="demo-avatar-dropdown">
            <span>{{ firstname}} {{ lastname}}</span>
            <div class="mdl-layout-spacer"></div>
            <button id="accbtn" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
              <i class="material-icons">arrow_drop_down</i>
            </button>
            <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="accbtn">
              <button class="mdl-menu__item">{{ firstname}} {{ lastname}}</button>
              <button class="mdl-menu__item">info@domain.net</button>
              <button class="mdl-menu__item">Add another account...</button>
            </ul>
          </div>
        </header>
        <nav class="demo-navigation mdl-navigation mdl-color--blue-grey-800">
          <a class="mdl-navigation__link" href=""><i class="mdl-color-text--blue-grey-400 material-icons">home</i>Home</a>
          <a class="mdl-navigation__link" href=""><i class="mdl-color-text--blue-grey-400 material-icons">terrain</i>Distance</a>
          <a class="mdl-navigation__link" href=""><i class="mdl-color-text--blue-grey-400 material-icons">watch</i>Time</a>
          <a class="mdl-navigation__link" href=""><i class="mdl-color-text--blue-grey-400 material-icons">loop</i>Carbon</a>
          <div class="mdl-layout-spacer"></div>
          <a class="mdl-navigation__link" href=""><i class="mdl-color-text--blue-grey-400 material-icons">help_outline</i></a>
        </nav>
      </div>
      <main class="mdl-layout__content mdl-color--grey-100">
        <div class="mdl-grid demo-content">

<!-- END NAV -->

        <div class="mdl-cell mdl-cell--12-col mdl-grid">
            <!-- Commute Card -->
            <div class="mdl-card mdl-shadow--4dp">
                <div class="mdl-card__title mdl-card--border">
                    <i class="material-icons md-96 icon-background">directions_bike</i>
                    <div class="mdl-layout-spacer"></div>
                    <h1>{{ total_commutes }}</h1>
                </div>
                <h2 class="mdl-card__title-text">commutes </h2>
                <div class="mdl-card__supporting-text">
                    <span class="mdl-typography--subhead-color-contrast">
                        <a href="#">Latest Commute March 24th, 2014</a>
                    </span>
                </div>
                <div class="mdl-card__actions mdl-card--border">
                    <a href="commute_details" class="mdl-button mdl-js-button mdl-js-ripple-effect">View Details</a>
                </div>
            </div>
            <!-- END Commute Card -->
            <!-- Savings Card -->
            <div class="mdl-card mdl-shadow--4dp">
                <div class="mdl-card__title mdl-card--border">
                    <i class="material-icons md-96 icon-background">attach_money</i>
                    <div class="mdl-layout-spacer"></div>
                    <h1>${{total_savings}}</h1>
                </div>
                <h2 class="mdl-card__title-text">savings</h2>
                <div class="mdl-card__supporting-text">
                    <span class="mdl-typography--subhead-color-contrast">
                        <a href="#">$96 dollars saved this month</a>
                    </span>
                </div>
                <div class="mdl-card__actions mdl-card--border">
                    <a href="commute_details" class="mdl-button mdl-js-button mdl-js-ripple-effect">View Details</a>
                </div>
            </div>
            <!-- END Savings Card -->


        </div>

        <div class="demo-graphs mdl-shadow--2dp mdl-color--white mdl-cell mdl-cell--8-col">
            <div id="myfirstchart"></div>
        </div>
        <div class="demo-updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--4-col-desktop">
            <div class="mdl-card__title mdl-card--expand mdl-color--blue-500">
                <div id="weeklypie" ></div>
            </div>
                <h1 class="mdl-card__title-text">Favorite day to commute</h2>
                <div class="mdl-card__actions mdl-card--border">
                    <a href="#" class="mdl-button mdl-js-button mdl-js-ripple-effect">View Details</a>
                </div>
            </div>



    <div class="mdl-cell mdl-cell--12-col mdl-grid">
        <div class="demo-updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--4-col-desktop">
                <div class="mdl-card__title mdl-card--expand mdl-color--teal-300">
                    <h1>{{total_distance}}</h1>
                </div>
                    <h2 class="mdl-card__title-text">Total distance</h2>
              <div class="mdl-card__actions mdl-card--border">
                <a href="commute_details" class="mdl-button mdl-js-button mdl-js-ripple-effect">View Details</a>
              </div>
            </div>
            <div class="demo-updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--4-col-desktop">
                <div class="mdl-card__title mdl-card--expand mdl-color--deep-purple-500">
                    <h1>{{ total_carbon }}</h1>
                </div>
                    <h2 class="mdl-card__title-text">kilograms of carbon</h2>
                <div class="mdl-card__actions mdl-card--border">
                    <a href="commute_details" class="mdl-button mdl-js-button mdl-js-ripple-effect">View Details</a>
                </div>
            </div>
            <div class="demo-updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--4-col-desktop">
                <div class="mdl-card__title mdl-card--expand mdl-color--green-500">
                    <h1>{{ total_carbon_trees }}</h2>
                </div>
                    <h2 class="mdl-card__title-text">Trees</h2>
                <div class="mdl-card__actions mdl-card--border">
                    <a href="commute_details" class="mdl-button mdl-js-button mdl-js-ripple-effect">View Details</a>
                </div>
            </div>
            </div>

<!-- Money saved pie chart -->
            <div class="demo-updates mdl-card mdl-shadow--2dp mdl-cell mdl-cell--4-col mdl-cell--4-col-tablet mdl-cell--4-col-desktop">
                <div class="mdl-card__title mdl-card--expand mdl-color--indigo-500">
                    <div id="piegoal" ></div>
                </div>
                <h1 class="mdl-card__title-text">${{goal}} remaining</h2>
                <div class="mdl-card__actions mdl-card--border">
                    <a href="#" class="mdl-button mdl-js-button mdl-js-ripple-effect">View Details</a>
                </div>
            </div>

        </div>

<script>

new Morris.Area({
  element: 'myfirstchart',
  data: [{% for ride in monthly_distance %}{
        month: '{{ ride[0] | monthfilter }}',
        value: {{ ride[1] * goal_savings }},
        value1: {{ (ride[2] * carbon_number)/1000 }}
        },{% endfor %}],
  // The name of the data record attribute that contains x-values.
  xkey: 'month',
  // A list of names of data record attributes that contain y-values.
  ykeys: ['value', 'value1'],
  // Labels for the ykeys -- will be displayed when you hover over the
  // chart.
  labels: ['Savings', 'Carbon'],
  lineColors:  ['#ACEC00', '#EBFBC0'],
  lineWidth: 2,
  pointSize: 1,
  smooth: false,
  parseTime: false,
  behaveLikeLine: true
});



  function dayOfWeekAsString(dayIndex) {
    return ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][dayIndex];
  };

    new Morris.Donut({
  element: 'weeklypie',
  data: [{% for day in day_count %}{
        label: '{{ day[0] | dayfilter }}',
        value: {{ day[1] }},
        },{% endfor %}],
  colors: ['#034500', '#166711', '#328A2E', '#5AAC56', '#8DCF8A', '#184A18', '#103910']
});

</script>
<script>

new Morris.Donut({
  element: 'piegoal',
  data: [{label: 'Goal progress', value: {{ percent_complete }} },
         {label: 'remaining', value: {{100 - percent_complete}} },
        ],
  colors: ['#7E1518', '#103910']
});

</script>

{% endblock %}