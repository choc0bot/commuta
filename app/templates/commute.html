{% extends "base.html" %}
{% block content %}

<style>
      #g1 {
        width:360px; height:240px;
        display: inline-block;
        margin: 1em;
      }
      #g2 {
        width:460px; height:440px;
        display: inline-block;
        margin: 1em;
      }
</style>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>

<!-- <script src="static/js/raphael.2.1.0.min.js"></script> -->
    <script src="static/js/justgage.js"></script>
<script>
      var g1;
      var g2;
      
      window.onload = function(){
        var g1 = new JustGage({
          id: "g1", 
          value: {{ percent_complete }}, 
          min: 0,
          max: 100,
          title: "{{ goal_title }}",
          label: "% Complete",
          customSectors: [{
            color : "#ff0000",
            lo : 0,
            hi : 10
          },{
            color : "#FFCC00",
            lo : 10,
            hi : 50
          }, {
            color : "#0000ff",
            lo : 50,
            hi : 75
          }, {
            color : "#00ff00",
            lo : 80,
            hi : 100
          }],
        });

        var g2 = new JustGage({
          id: "g2", 
          value: {{total_distance}} , 
          min: 0,
          max: 40075,
          title: "Round the world",
          label: "kms",
          gaugeWidthScale : 0.75,
          customSectors: [{
            color : "#ff0000",
            lo : 0,
            hi : 10019
          },{
            color : "#FFCC00",
            lo : 10019,
            hi : 20038
          }, {
            color : "#0000ff",
            lo : 20038,
            hi : 30056
          }, {
            color : "#00ff00",
            lo : 30056,
            hi : 40075
          }],
          donut: true
        });
      };
</script>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>

<script type="text/javascript">
//# | datetimefilter }},
      google.load("visualization", "1.1", {packages:["bar", 'corechart', 'table', 'gauge', 'controls']});
      google.setOnLoadCallback(drawVisualization);
      function drawVisualization() {
        var thedata = google.visualization.arrayToDataTable([
          ['', 'Savings', 'Carbon'],
          {% for ride in monthly_savings %}
          ['{{ ride[0] | monthfilter }}', {{ ride[1] * 3.76 }}, {{ (ride[1] * 10 * 0.221) }},],
          {% endfor %}
        ]);
        // Set chart options
            var options = {
            //chart:{
              title: 'Savings by month',
              colors: ['#184A18', '#7BC66B'],
              titleTextStyle: {
                    color: '#999999', 
                    fontName: 'Arial', 
                    fontSize: 24
                    },
             // },
              legend: {position: 'none'},
              vAxis: { textPosition: 'none' },
              seriesType: "bars",
              series: {1: {type: "line"}}

            };



        var formatter = new google.visualization.NumberFormat({prefix:'$'});
        var g_formatter = new google.visualization.NumberFormat({suffix: 'grams'});
        formatter.format(thedata, 1); // Apply formatter to second column
        g_formatter.format(thedata, 2);
        var ride_chart = new google.visualization.ColumnChart(document.getElementById("ride_chart_div"));
        ride_chart.draw(thedata, options);
        // Instantiate and draw our chart, passing in some options.
      }

      function dayOfWeekAsString(dayIndex) {
        return ["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][dayIndex];
      };

      google.setOnLoadCallback(drawChart);
      function drawChart() {

        var data = google.visualization.arrayToDataTable([
          ['Day', 'Commutes per Day'],
          {% for day in day_count %}
            [
            '{{ day[0] | dayfilter }}', {{ day[1] }}
            ],
          {% endfor %}
        ]);

        var options = {
          title: 'Commutes by day',
          titleTextStyle: {
                    color: '#999999', 
                    fontName: 'Arial', 
                    fontSize: 40
                    },
          fontSize: 16,
          //colors: ['#DFF0D8', '#e6693e', '#ec8f6e', '#f3b49f', '#f6c7b6']
          colors: ['#7BC66B', '#52B552', '#299C39', '#218429', '#186321', '#184A18', '#103910']
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));

        chart.draw(data, options);
      }


 
    </script>


  <div class="container">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Commuting overview for {{firstname}} {{lastname}}</h1>
        </div>
        <!-- /.col-lg-12 -->
     </div>
    <div class="row">
        <div class="col-md-8">
            <div id="myfirstchart" style="height: 250px;"></div>
               <!-- <div id="ride_chart_div" ></div> -->
        </div>
        <div class="col-md-4" style>
                <div id="g1"></div>
    </div>
    <div class="row">
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                          <i class="fa fa-road fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">{{ total_commutes }}</div>
                            <div>Commutes</div>
                         </div>
                    </div>
                </div>
                    <a href="#">
                        <div class="panel-footer">
                            <span class="pull-left">View Details</span>
                            <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                            <div class="clearfix"></div>
                        </div>
                    </a>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-green">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-xs-3">
                               <i class="fa fa-money fa-5x"></i>
                            </div>
                            <div class="col-xs-9 text-right">
                                <div class="huge">${{total_savings}}</div>
                                <div>saved!</div>
                            </div>
                        </div>
                    </div>
                    <a href="#">
                        <div class="panel-footer">
                            <span class="pull-left">View Details</span>
                            <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                            <div class="clearfix"></div>
                        </div>
                    </a>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-red">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-check-square fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">${{goal}}</div>
                            <div>remaining</div>
                        </div>
                    </div>
                </div>
                <a href="#">
                    <div class="panel-footer">
                        <span class="pull-left">View Details</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-yellow">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-forward fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">{{total_distance}}</div>
                            <div>Total distance</div>
                        </div>
                    </div>
                </div>
                <a href="#">
                    <div class="panel-footer">
                        <span class="pull-left">View Details</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                          <i class="fa fa-recycle fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">{{ total_carbon }}</div>
                            <div>kilograms of carbon</div>
                         </div>
                    </div>
                </div>
                    <a href="#">
                        <div class="panel-footer">
                            <span class="pull-left">View Details</span>
                            <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                            <div class="clearfix"></div>
                        </div>
                    </a>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-green">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                          <i class="fa fa-tree fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">{{ total_carbon_trees }}</div>
                            <div>Trees</div>
                         </div>
                    </div>
                </div>
                    <a href="#">
                        <div class="panel-footer">
                            <span class="pull-left">View Details</span>
                            <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                            <div class="clearfix"></div>
                        </div>
                    </a>
            </div>
        </div>
</div>


<!-- old -->
    <div class="row">
        <div class="col-md-5">
            <div id="g2"></div>
        </div>
        <div class="col-md-5" style>
            <div id="piechart" style="width: 900px; height: 500px;"></div>
        </div>


</div>


<a href='commute_details'>details</a>
</div>

    <script>

    new Morris.Line({
  // ID of the element in which to draw the chart.
  element: 'myfirstchart',
  // Chart data records -- each entry in this array corresponds to a point on
  // the chart.
  data: [{% for ride in monthly_savings %}
        { 
            month: '{{ ride[0] | monthfilter }}', value: {{ ride[1] * 3.76 }}, value1: {{ (ride[1] * 10 * 0.221) }} 
        },
    {% endfor %}],
  // The name of the data record attribute that contains x-values.
  xkey: 'year',
  // A list of names of data record attributes that contain y-values.
  ykeys: ['value', 'value1'],
  // Labels for the ykeys -- will be displayed when you hover over the
  // chart.
  labels: ['Savings', 'Carbon']
});

    </script>

{% endblock %}